<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Buscar Paciente</title>
    <link rel="stylesheet" href="/static/styles/stylelogin.css">
</head>
<body>
    <img alt="Abrir menú" src="../static/baseline-density-medium.svg" class="menu-toggle" aria-label="Abrir menú" onclick="document.getElementById('sidebar-menu').classList.toggle('open')">
    <nav id="sidebar-menu" class="sidebar-menu">
        <a href="/dashboard">
            <img src="../static/home.svg" alt="Inicio" class="icon-menu">Inicio
        </a>
        <a href="/patients/register">
            <img src="../static/user-plus.svg" alt="Registrar paciente" class="icon-menu">Registrar Paciente
        </a>
        <a href="/appointments/register">
            <img src="../static/clipboard-plus.svg" alt="Registrar cita" class="icon-menu">Registrar Cita
        </a>
        <a href="/patients/list">
            <img src="../static/user-search.svg" alt="Buscar paciente" class="icon-menu">Buscar Paciente
        </a>
        <a href="/appointments/search">
            <img src="../static/clipboard-search.svg" alt="Buscar cita" class="icon-menu">Buscar Cita
        </a>
        <a href="/auth/logout">
            <img src="../static/logout-2.svg" alt="Cerrar sesión" class="icon-menu">Cerrar sesión
        </a>
    </nav>
    <div class="search-container">
        <h1>Buscar pacientes</h1>
        <div class="search-bar">
            <form method="get" action="/patients/search" class="search-form">
                <input type="text" name="nombre" placeholder="Buscar paciente por nombre..." required>
                <button type="submit" class="filter-btn">Buscar</button>
            </form>
        </div>
        <div class="table-responsive">
            <table class="appointments-table">
                <thead>
                    <tr>
                        <th scope="col">Nombre</th>
                        <th scope="col">Email</th>
                        <th scope="col">Teléfono</th>
                        <th scope="col">Edad</th>
                        <th scope="col">Sexo</th>
                        <th scope="col"></th>
                    </tr>
                </thead>
                <tbody>
                    {% if pacientes %}
                        {% for paciente in pacientes %}
                            <tr>
                                <td>{{ paciente.nombre }}</td>
                                <td>{{ paciente.email }}</td>
                                <td>{{ paciente.telefono }}</td>
                                <td>{{ paciente.edad }}</td>
                                <td>{{ paciente.sexo }}</td>
                                <td>
                                    <a href="/records/{{ paciente.id }}" class="acciones">Ver expediente</a>
                                </td>
                            </tr>
                        {% endfor %}
                    {% elif error %}
                        <tr>
                            <td colspan="6"><p class="error">{{ error }}</p></td>
                        </tr>
                    {% endif %}
                </tbody>
            </table>
        </div>
    </div>
</body>
</html>