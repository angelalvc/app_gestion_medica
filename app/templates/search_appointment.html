<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Buscar Cita</title>
    <link rel="stylesheet" href="/static/styles/stylelogin.css">
</head>
<body>
    <img alt="Abrir menú" src="../static/baseline-density-medium.svg" class="menu-toggle" aria-label="Abrir menú" onclick="document.getElementById('sidebar-menu').classList.toggle('open')">
    <nav id="sidebar-menu" class="sidebar-menu">
        <a href="/dashboard">
            <img src="../static/home.svg" alt="Inicio" class="icon-menu">Inicio
        </a>
        <a href="/patients/register">
            <img src="../static/user-plus.svg" alt="Registrar paciente" class="icon-menu">Registrar Paciente
        </a>
        <a href="/appointments/register">
            <img src="../static/clipboard-plus.svg" alt="Registrar cita" class="icon-menu">Registrar Cita
        </a>
        <a href="/patients/list">
            <img src="../static/user-search.svg" alt="Buscar paciente" class="icon-menu">Buscar Paciente
        </a>
        <a href="/appointments/search">
            <img src="../static/clipboard-search.svg" alt="Buscar cita" class="icon-menu">Buscar Cita
        </a>
        <a href="/auth/logout">
            <img src="../static/logout-2.svg" alt="Cerrar sesión" class="icon-menu">Cerrar sesión
        </a>
    </nav>
    <div class="search-container">
    <h1>Buscar citas</h1>
    <div class="search-bar">
        <form method="get" action="/appointments/search" class="search-form">
            <input type="text" name="paciente_nombre" placeholder="Buscar por nombre de paciente...">
            <input type="date" name="fecha" >
            <button type="submit" class="filter-btn">Buscar</button>
        </form>
    </div>
    <div class="table-responsive">
        <table class="appointments-table">
            <thead>
                <tr>
                    <th scope="col">Nombre del paciente</th>
                    <th scope="col">Motivo</th>
                    <th scope="col">Diagnóstico</th>
                    <th scope="col">Procedimiento</th>
                    <th scope="col">Fecha</th>
                    <th scope="col">Hora</th>
                </tr>
            </thead>
            <tbody>
                {% if citas %}
                    {% for cita in citas %}
                        <tr>
                            <td>{{ cita.paciente_nombre }}</td>
                            <td>{{ cita.motivo }}</td>
                            <td>{{ cita.diagnostico }}</td>
                            <td>{{ cita.procedimiento }}</td>
                            <td>{{ cita.fecha }}</td>
                            <td>{{ cita.hora }}</td>
                        </tr>
                    {% endfor %}
                {% elif error %}
                    <tr>
                        <td colspan="6"><p class="error">{{ error }}</p></td>
                    </tr>
                {% endif %}
            </tbody>
        </table>
    </div>
</div>
</body>
</html>